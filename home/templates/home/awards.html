{% extends "home/layout.html" %}
{% block title %} {{ title }} {% endblock %}
{% block body %}
    <h4>Награды (дипломы) компетенций: {{ current_event}}</h4>

    <table class = "table table-bordered table-light">
        <form method="POST" action="{% url 'home:awards' %}">
            {% csrf_token %} 
               
            <tr>
                <th>№</th>
                <th>
                    Наименование </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="title"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-title"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Компетенция </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="competency"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-competency"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Награда </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="award"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-award"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Дата создания </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="created_date"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-created_date"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Дата изменения </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="updated_date"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-updated_date"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Создатель </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="created_by"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-created_by"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Изменил </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="updated_by"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-updated_by"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>
                    Мероприятие </br>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="event_related"><i class='fa fa-long-arrow-up'></i></button>
                    <button class="btn btn-outline-info btn-sm" name="sort" formnovalidate value="-event_related"><i class='fa fa-long-arrow-down'></i></button>
                </th>
                <th>Примечания</th>
            </tr>

            {% if not form.instance.id %}
                <tr>
                    {% include 'home/award.html' %}
                </tr>
            {% endif %}   

            <tbody class="table-group-divider">
            {% for award in awards %}
                 <tr>
                    {% if form.instance.id == award.id %}
                        {% include 'home/award.html' %}
                    {% else %}
                        <td>{{forloop.counter}}</td>
                        <td>{{award.title}}</td>
                        <td>{{award.competency}}</td>
                        <td>{{award.award}}</td>
                        <td>{{award.created_date|date:'d.m.Y H:i'}}</td>
                        <td>{{award.updated_date|date:'d.m.Y H:i'}}</td>
                        <td>{{award.created_by}}</td>
                        <td>{{award.updated_by}}</td>
                        <td>{{award.event_related}}</td>
                        <td> 
                            <button class="btn btn-outline-success" name="edit" value="{{ award.id }}" formnovalidate title="Редактировать текущую строку"><i class='fa fa-pencil'></i></button>
                            <button class="btn btn-outline-danger" name="delete" value="{{ award.id }}" formnovalidate title="Удалить текущую строку. Внимание! Удаляется сразу, без запроса подтверждения!">Del</button>
                        </td> 
                    {% endif %}
                </tr>
            {% endfor %}
        </form>
        <tbody> 
    </table>
{% endblock %}